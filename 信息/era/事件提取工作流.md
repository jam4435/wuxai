# 事件提取工作流

## 概述

以事件为核心驱动，从武侠小说中提取并生成变量文件。人物的创建和变化全部由事件驱动。

## 两轮工作流程

### 第1轮：事件识别
- 输入：1-2个章节的小说文本
- 输出：事件列表（事件名、简述、参与人物、时间）
- 提示词：[第1轮-事件识别.md](第1轮-事件识别.md)

### 第2轮：事件详情生成
- 输入：第1轮的事件列表 + 已有人物变量
- 输出：事件 JSON 文件 + 更新后的人物变量
- 提示词：[第2轮-事件详情.md](第2轮-事件详情.md)

## 文件命名规范

- 事件文件：`事件条目-第x回-xx-[简洁名称].json`
- 人物文件：`[人物姓名].json`

## 核心规则速查

### 差分操作
| 操作   | 用途               |
| ------ | ------------------ |
| insert | 新增键             |
| update | 改值（键名不变）   |
| delete | 删键（用`{}`标记） |

**键名替换 = delete + insert**

### 时间默认值
- 年：根据背景推断
- 月：按季节，无则1月
- 日：默认1日
- 时：默认8时

### 人物必填字段
姓名、性别、外貌、出生年份、身材、性格、所在位置、身份、武功、重要物品、人物经历、关系网

---

## 详细格式参考

如需完整格式说明，请查阅原始文档：[事件提取提示词-完整版.md](事件提取提示词-完整版.md)
